<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code-Synapse Index Viewer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <h1 class="logo">Code-Synapse</h1>
      <span class="subtitle">Index Viewer</span>
      <button id="refresh-btn" class="btn btn-icon" title="Refresh">&#x21bb;</button>
    </header>

    <!-- Stats Cards -->
    <section class="stats-grid">
      <div class="stat-card" id="files-card">
        <div class="stat-label">Files</div>
        <div class="stat-value" id="files-count">-</div>
        <div class="stat-detail" id="files-detail">Loading...</div>
      </div>
      <div class="stat-card" id="functions-card">
        <div class="stat-label">Functions</div>
        <div class="stat-value" id="functions-count">-</div>
        <div class="stat-detail" id="functions-detail">Loading...</div>
      </div>
      <div class="stat-card" id="classes-card">
        <div class="stat-label">Classes</div>
        <div class="stat-value" id="classes-count">-</div>
        <div class="stat-detail" id="classes-detail">Loading...</div>
      </div>
      <div class="stat-card" id="relationships-card">
        <div class="stat-label">Relationships</div>
        <div class="stat-value" id="relationships-count">-</div>
        <div class="stat-detail" id="relationships-detail">Loading...</div>
      </div>
    </section>

    <!-- Search Bar -->
    <section class="search-section">
      <div class="search-container">
        <input
          type="text"
          id="search-input"
          class="search-input"
          placeholder="Search: &quot;authentication handler&quot;, &quot;what calls login&quot;, &quot;most complex functions&quot;..."
        >
        <select id="search-type" class="search-type">
          <option value="all">All</option>
          <option value="function">Functions</option>
          <option value="class">Classes</option>
          <option value="interface">Interfaces</option>
          <option value="file">Files</option>
        </select>
        <button id="search-btn" class="btn btn-primary">Search</button>
      </div>
      <div class="search-hints">
        Examples: "where is login implemented", "what calls authenticate", "most called functions"
      </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Left Panel: File Browser -->
      <aside class="panel file-browser">
        <div class="panel-header">
          <h2>Files</h2>
          <span class="file-count" id="file-list-count">0 files</span>
        </div>
        <div class="panel-content">
          <ul id="file-list" class="file-tree">
            <!-- Files will be populated here -->
          </ul>
        </div>
      </aside>

      <!-- Center Panel: Details / Search Results -->
      <section class="panel detail-panel">
        <div class="panel-header">
          <h2 id="detail-title">Overview</h2>
        </div>
        <div class="panel-content" id="detail-content">
          <!-- Overview content -->
          <div id="overview-section">
            <h3>Language Distribution</h3>
            <div id="language-chart" class="chart-container">
              <!-- Language bars will be populated here -->
            </div>

            <h3>Complexity Distribution</h3>
            <div id="complexity-chart" class="chart-container">
              <!-- Complexity histogram will be populated here -->
            </div>

            <h3>Most Called Functions</h3>
            <table id="most-called-table" class="data-table">
              <thead>
                <tr>
                  <th>Function</th>
                  <th>File</th>
                  <th>Calls</th>
                </tr>
              </thead>
              <tbody>
                <!-- Data will be populated here -->
              </tbody>
            </table>
          </div>

          <!-- Search results (hidden by default) -->
          <div id="search-results" class="hidden">
            <div id="search-results-header">
              <span id="search-results-count">0 results</span>
            </div>
            <ul id="search-results-list" class="results-list">
              <!-- Search results will be populated here -->
            </ul>
          </div>

          <!-- Entity details (hidden by default) -->
          <div id="entity-details" class="hidden">
            <!-- Will show function/class/file details -->
          </div>
        </div>
      </section>

      <!-- Right Panel: Relationships -->
      <aside class="panel relationships-panel">
        <div class="panel-header">
          <h2>Relationships</h2>
        </div>
        <div class="panel-content">
          <div id="no-selection" class="empty-state">
            Select a function or file to see relationships
          </div>

          <!-- Call Graph (hidden by default) -->
          <div id="call-graph-section" class="hidden">
            <h3>Calls</h3>
            <ul id="callees-list" class="relationship-list">
              <!-- Callees will be populated here -->
            </ul>

            <h3>Called By</h3>
            <ul id="callers-list" class="relationship-list">
              <!-- Callers will be populated here -->
            </ul>
          </div>

          <!-- Import Graph (hidden by default) -->
          <div id="import-graph-section" class="hidden">
            <h3>Imports</h3>
            <ul id="imports-list" class="relationship-list">
              <!-- Imports will be populated here -->
            </ul>

            <h3>Imported By</h3>
            <ul id="importers-list" class="relationship-list">
              <!-- Importers will be populated here -->
            </ul>
          </div>
        </div>
      </aside>
    </main>

    <!-- Footer: Health Status -->
    <footer class="footer">
      <div class="health-indicator" id="health-indicator">
        <span class="health-dot"></span>
        <span id="health-status">Checking...</span>
      </div>
      <div class="health-details">
        <span id="coverage-info">Coverage: -</span>
        <span id="embedding-info">Embeddings: -</span>
      </div>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
